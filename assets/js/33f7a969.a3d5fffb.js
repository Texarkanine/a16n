"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4273],{26406(e,n,s){s.d(n,{R:()=>o,x:()=>l});var i=s(22155);let r={},t=i.createContext(r);function o(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},79316(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});let i=JSON.parse('{"id":"plugin-development/index","title":"Plugin Development","description":"How to create plugins for a16n","source":"@site/.generated/plugin-development/index.md","sourceDirName":"plugin-development","slug":"/plugin-development/","permalink":"/a16n/plugin-development/","draft":false,"unlisted":false,"editUrl":"https://github.com/Texarkanine/a16n/tree/main/packages/docs/docs/.generated/plugin-development/index.md","tags":[],"version":"current","frontMatter":{"title":"Plugin Development","description":"How to create plugins for a16n"},"sidebar":"tutorialSidebar","previous":{"title":"Understanding Conversions","permalink":"/a16n/understanding-conversions/"},"next":{"title":"FAQ","permalink":"/a16n/faq"}}');var r=s(65723),t=s(26406);let o={title:"Plugin Development",description:"How to create plugins for a16n"},l="Plugin Development",a={},c=[{value:"Plugin Interface",id:"plugin-interface",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Customization Types",id:"customization-types",level:3},{value:"Workspace Interface",id:"workspace-interface",level:3},{value:"Discovery",id:"discovery",level:3},{value:"Emission",id:"emission",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"package.json Requirements",id:"packagejson-requirements",level:3},{value:"Learning from Existing Plugins",id:"learning-from-existing-plugins",level:2},{value:"Publishing",id:"publishing",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"plugin-development",children:"Plugin Development"})}),"\n",(0,r.jsx)(n.p,{children:"a16n uses a plugin architecture to support different AI coding tools. Each plugin handles:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discovery"})," - Finding agent customization files in a project"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emission"})," - Writing converted files to the target format"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"plugin-interface",children:"Plugin Interface"}),"\n",(0,r.jsxs)(n.p,{children:["Plugins implement the ",(0,r.jsx)(n.code,{children:"A16nPlugin"})," interface from ",(0,r.jsx)(n.code,{children:"@a16njs/models"}),"; see the ",(0,r.jsx)(n.a,{href:"/models/api",children:"Models API Reference"})," for complete interface documentation."]}),"\n",(0,r.jsx)(n.p,{children:"The key methods are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"discover(rootOrWorkspace)"})})," - Scan a directory and return found customizations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"emit(models, rootOrWorkspace, options)"})})," - Write customizations to disk in the plugin's format"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Both methods accept ",(0,r.jsx)(n.code,{children:"string | Workspace"})," \u2014 a plain directory path string or a ",(0,r.jsx)(n.a,{href:"#workspace-interface",children:(0,r.jsx)(n.code,{children:"Workspace"})})," instance. When a string is passed, plugins should wrap it using ",(0,r.jsx)(n.code,{children:"toWorkspace()"})," from ",(0,r.jsx)(n.code,{children:"@a16njs/models"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { A16nPlugin, Workspace } from '@a16njs/models';\nimport { CustomizationType, toWorkspace } from '@a16njs/models';\n\nconst myPlugin: A16nPlugin = {\n  id: 'my-agent',\n  name: 'My Agent',\n  supports: [CustomizationType.GlobalPrompt, CustomizationType.FileRule],\n\n  async discover(rootOrWorkspace: string | Workspace) {\n    const ws = toWorkspace(rootOrWorkspace, 'my-agent-discover');\n    // Return { items: [...], warnings: [...] }\n  },\n\n  async emit(models, rootOrWorkspace, options) {\n    const ws = toWorkspace(rootOrWorkspace, 'my-agent-emit');\n    // Return { written: [...], warnings: [...], unsupported: [...] }\n  }\n};\n\nexport default myPlugin;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"customization-types",children:"Customization Types"}),"\n",(0,r.jsxs)(n.p,{children:["Plugins declare which types they support via the ",(0,r.jsx)(n.code,{children:"supports"})," array. Entries are instances of ",(0,r.jsx)(n.a,{href:"/models/#customizationtype",children:"CustomizationType"})," from ",(0,r.jsx)(n.code,{children:"@a16njs/models"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"workspace-interface",children:"Workspace Interface"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Workspace"})," interface abstracts filesystem operations so plugins can work with real directories or in-memory workspaces (useful for testing). All paths passed to workspace methods are ",(0,r.jsx)(n.strong,{children:"relative to the workspace root"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { Workspace } from '@a16njs/models';\n\n// Available methods:\nawait ws.exists('path/to/file');       // boolean\nawait ws.read('path/to/file');         // string (UTF-8)\nawait ws.write('path/to/file', content); // void\nawait ws.readdir('path/to/dir');       // WorkspaceEntry[]\nawait ws.mkdir('path/to/dir');         // void (always recursive)\nws.resolve('path/to/file');            // absolute path string\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"WorkspaceEntry"})," items returned by ",(0,r.jsx)(n.code,{children:"readdir()"})," have boolean properties ",(0,r.jsx)(n.code,{children:"isFile"})," and ",(0,r.jsx)(n.code,{children:"isDirectory"})," (not methods)."]}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"toWorkspace()"})," to normalize the ",(0,r.jsx)(n.code,{children:"string | Workspace"})," parameter at the top of your functions:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { toWorkspace } from '@a16njs/models';\n\nconst ws = toWorkspace(rootOrWorkspace, 'my-plugin-discover');\n// ws is always a Workspace \u2014 strings are auto-wrapped in LocalWorkspace\n"})}),"\n",(0,r.jsx)(n.h3,{id:"discovery",children:"Discovery"}),"\n",(0,r.jsx)(n.p,{children:"Discovery scans a project directory and returns customizations in the intermediate representation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"async discover(rootOrWorkspace: string | Workspace): Promise<DiscoveryResult> {\n  const ws = toWorkspace(rootOrWorkspace, 'my-plugin-discover');\n  const items: AgentCustomization[] = [];\n  const warnings: Warning[] = [];\n\n  // Use ws.readdir(), ws.read(), ws.exists() to scan for config files\n  // Parse and convert to AgentCustomization items\n\n  return { items, warnings };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"emission",children:"Emission"}),"\n",(0,r.jsx)(n.p,{children:"Emission converts intermediate representation back to the plugin's native format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"async emit(\n  items: AgentCustomization[],\n  rootOrWorkspace: string | Workspace,\n  options?: EmitOptions\n): Promise<EmitResult> {\n  const ws = toWorkspace(rootOrWorkspace, 'my-plugin-emit');\n  const written: WrittenFile[] = [];\n  const warnings: Warning[] = [];\n  const unsupported: AgentCustomization[] = [];\n\n  for (const item of items) {\n    if (this.supports.includes(item.type)) {\n      // Use ws.mkdir(), ws.write() to write files\n      // Use ws.resolve(relPath) for written[].path\n    } else {\n      unsupported.push(item);\n    }\n  }\n\n  return { written, warnings, unsupported };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,r.jsx)(n.p,{children:"Recommended plugin structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"a16n-plugin-example/\n\u251C\u2500\u2500 src/\n\u2502   \u251C\u2500\u2500 index.ts        # Plugin entry point & default export\n\u2502   \u251C\u2500\u2500 discover.ts     # Discovery logic\n\u2502   \u2514\u2500\u2500 emit.ts         # Emission logic\n\u251C\u2500\u2500 test/\n\u2502   \u251C\u2500\u2500 fixtures/       # Test fixtures\n\u2502   \u251C\u2500\u2500 discover.test.ts\n\u2502   \u2514\u2500\u2500 emit.test.ts\n\u251C\u2500\u2500 package.json\n\u251C\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,r.jsx)(n.h3,{id:"packagejson-requirements",children:"package.json Requirements"}),"\n",(0,r.jsxs)(n.p,{children:["Your ",(0,r.jsx)(n.code,{children:"package.json"})," must:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use the ",(0,r.jsx)(n.code,{children:"a16n-plugin-"})," prefix in the package name (required for auto-discovery)"]}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"main"})," to point to your built entry file"]}),"\n",(0,r.jsxs)(n.li,{children:["Declare ",(0,r.jsx)(n.code,{children:"@a16njs/models"})," as a ",(0,r.jsx)(n.code,{children:"peerDependency"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "a16n-plugin-example",\n  "type": "module",\n  "main": "./dist/index.js",\n  "peerDependencies": {\n    "@a16njs/models": "^0.9.0"\n  },\n  "devDependencies": {\n    "@a16njs/models": "^0.9.0"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"learning-from-existing-plugins",children:"Learning from Existing Plugins"}),"\n",(0,r.jsx)(n.p,{children:"The best way to understand plugin development is to study the existing implementations:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/plugin-cursor",children:"@a16njs/plugin-cursor"})})}),"\n",(0,r.jsx)(n.p,{children:"The Cursor plugin demonstrates:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MDC file parsing (YAML frontmatter + markdown body)"}),"\n",(0,r.jsx)(n.li,{children:"Multiple file types (rules, commands, ignore files)"}),"\n",(0,r.jsx)(n.li,{children:"Frontmatter-based type classification"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/plugin-claude",children:"@a16njs/plugin-claude"})})}),"\n",(0,r.jsx)(n.p,{children:"The Claude plugin demonstrates:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Settings JSON handling"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://github.com/Texarkanine/a16n-plugin-cursorrules",children:"a16n-plugin-cursorrules"})})}),"\n",(0,r.jsx)(n.p,{children:"The cursorrules plugin demonstrates:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Community plugin naming format (",(0,r.jsx)(n.code,{children:"a16n-plugin-*"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Discovery-only support (no emission)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"publishing",children:"Publishing"}),"\n",(0,r.jsxs)(n.p,{children:["Community plugins should be published to npm with the ",(0,r.jsx)(n.code,{children:"a16n-plugin-"})," prefix:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"a16n-plugin-<name>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["a16n automatically discovers installed packages matching the ",(0,r.jsx)(n.code,{children:"a16n-plugin-*"})," naming convention by scanning ",(0,r.jsx)(n.code,{children:"node_modules"})," directories. No registration or configuration is needed - just ",(0,r.jsx)(n.code,{children:"npm install"})," the plugin alongside a16n."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@a16njs/plugin-*"})," scoped packages are reserved for bundled plugins maintained in the a16n monorepo. Community plugins should use the unscoped ",(0,r.jsx)(n.code,{children:"a16n-plugin-*"})," convention."]})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/models/api",children:"Models API Reference"})," - Plugin interface documentation"]}),"\n",(0,r.jsxs)(n.li,{children:["Plugins:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/plugin-cursor",children:"Plugin: Cursor"})," - Cursor implementation details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/plugin-claude",children:"Plugin: Claude"})," - Claude implementation details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/plugin-a16n",children:"Plugin: a16n"})," - a16n implementation details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/plugin-cursorrules",children:"Plugin: cursorrules"})," - cursorrules implementation details"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/understanding-conversions",children:"Understanding Conversions"})," - Translation can be hard!"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/Texarkanine/a16n",children:"GitHub Repository"})," - Source code"]}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);