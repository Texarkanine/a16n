"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6044],{26406(e,n,s){s.d(n,{R:()=>r,x:()=>i});var t=s(22155);let o={},l=t.createContext(o);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},39129(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});let t=JSON.parse('{"id":"glob-hook/index","title":"Glob Hook CLI","description":"As of January 2026, Claude Code natively supports glob-based file rules via the paths frontmatter for lossless conversion.","source":"@site/.generated/glob-hook/index.md","sourceDirName":"glob-hook","slug":"/glob-hook/","permalink":"/a16n/glob-hook/","draft":false,"unlisted":false,"editUrl":"https://github.com/Texarkanine/a16n/tree/main/packages/docs/docs/.generated/glob-hook/index.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"default","permalink":"/a16n/plugin-claude/api/0.3.0/variables/default"}}');var o=s(65723),l=s(26406);let r={sidebar_position:6},i="Glob Hook CLI",a={},d=[{value:"Why This Package?",id:"why-this-package",level:2},{value:"Installation",id:"installation",level:2},{value:"CLI Usage",id:"cli-usage",level:2},{value:"Options",id:"options",level:3},{value:"Basic Example",id:"basic-example",level:3},{value:"Integration with Claude Code",id:"integration-with-claude-code",level:2},{value:"Hook Configuration",id:"hook-configuration",level:3},{value:"Multiple Pattern Rules",id:"multiple-pattern-rules",level:3},{value:"Output Format",id:"output-format",level:2},{value:"When Pattern Matches",id:"when-pattern-matches",level:3},{value:"When Pattern Doesn&#39;t Match",id:"when-pattern-doesnt-match",level:3},{value:"On Error",id:"on-error",level:3},{value:"Glob Pattern Syntax",id:"glob-pattern-syntax",level:2},{value:"Common Patterns",id:"common-patterns",level:3},{value:"Pattern Examples",id:"pattern-examples",level:3},{value:"Integration with a16n (Legacy)",id:"integration-with-a16n-legacy",level:2},{value:"Example Legacy Conversion",id:"example-legacy-conversion",level:3},{value:"Current Behavior",id:"current-behavior",level:3},{value:"Hook Input Schema",id:"hook-input-schema",level:2},{value:"Requirements",id:"requirements",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"glob-hook-cli",children:"Glob Hook CLI"})}),"\n",(0,o.jsxs)(n.admonition,{title:"Not Required for Claude Code (January 2026+)",type:"caution",children:[(0,o.jsxs)(n.p,{children:["As of January 2026, Claude Code natively supports glob-based file rules via the ",(0,o.jsx)(n.code,{children:"paths:"})," frontmatter in ",(0,o.jsx)(n.code,{children:".claude/rules/*.md"})," files. ",(0,o.jsx)(n.strong,{children:"a16n no longer uses glob-hook for Claude Code conversions"})," \u2014 FileRules are now emitted as native Claude rules with ",(0,o.jsx)(n.code,{children:"paths:"})," frontmatter for lossless conversion."]}),(0,o.jsx)(n.p,{children:"This package remains available for custom hook configurations or other use cases, but is no longer needed for standard a16n Claude conversions."})]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"@a16njs/glob-hook"})," package is a CLI tool for glob-based file path matching in Claude Code hooks. It enables pattern-based rule injection\u2014a capability that Claude Code hooks don't natively support."]}),"\n",(0,o.jsx)(n.h2,{id:"why-this-package",children:"Why This Package?"}),"\n",(0,o.jsxs)(n.p,{children:["Claude Code hooks use a ",(0,o.jsx)(n.code,{children:"matcher"})," field that matches ",(0,o.jsx)(n.strong,{children:"tool names"})," (like ",(0,o.jsx)(n.code,{children:"Read"}),", ",(0,o.jsx)(n.code,{children:"Write"}),", ",(0,o.jsx)(n.code,{children:"Edit"}),"), not file paths. To apply rules to specific file patterns (like ",(0,o.jsx)(n.code,{children:"**/*.tsx"})," for React files), you need external tooling."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"glob-hook"})," bridges this gap:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Reads hook input from stdin (JSON with ",(0,o.jsx)(n.code,{children:"tool_input.file_path"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Matches the file path against glob patterns using ",(0,o.jsx)(n.a,{href:"https://github.com/micromatch/micromatch",children:"micromatch"})]}),"\n",(0,o.jsxs)(n.li,{children:["Outputs ",(0,o.jsx)(n.code,{children:"additionalContext"})," if matched, enabling pattern-based rule injection"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Via npx (recommended for hooks)\nnpx @a16njs/glob-hook --globs "**/*.tsx" --context-file "rules.txt"\n\n# Or install globally\nnpm install -g @a16njs/glob-hook\n'})}),"\n",(0,o.jsx)(n.h2,{id:"cli-usage",children:"CLI Usage"}),"\n",(0,o.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Required"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--globs"})}),(0,o.jsx)(n.td,{children:"Yes"}),(0,o.jsxs)(n.td,{children:["Comma-separated glob patterns (e.g., ",(0,o.jsx)(n.code,{children:'"**/*.ts,**/*.tsx"'}),")"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"--context-file"})}),(0,o.jsx)(n.td,{children:"Yes"}),(0,o.jsx)(n.td,{children:"Path to file containing context to inject when matched"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"basic-example",children:"Basic Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Pipe hook JSON to glob-hook\necho \'{"tool_input":{"file_path":"src/Button.tsx"}}\' | \\\n  npx @a16njs/glob-hook \\\n    --globs "**/*.tsx" \\\n    --context-file ".a16n/rules/react.txt"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"integration-with-claude-code",children:"Integration with Claude Code"}),"\n",(0,o.jsx)(n.h3,{id:"hook-configuration",children:"Hook Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Configure in ",(0,o.jsx)(n.code,{children:".claude/settings.local.json"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "hooks": {\n    "PreToolUse": [\n      {\n        "matcher": "Write|Edit|MultiEdit",\n        "hooks": [\n          {\n            "type": "command",\n            "command": "npx @a16njs/glob-hook --globs \'**/*.tsx,**/*.ts\' --context-file \'.a16n/rules/typescript.txt\'"\n          }\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"multiple-pattern-rules",children:"Multiple Pattern Rules"}),"\n",(0,o.jsx)(n.p,{children:"You can set up multiple hooks for different file patterns:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "hooks": {\n    "PreToolUse": [\n      {\n        "matcher": "Write|Edit",\n        "hooks": [\n          {\n            "type": "command",\n            "command": "npx @a16njs/glob-hook --globs \'**/*.tsx,**/*.jsx\' --context-file \'.a16n/rules/react.txt\'"\n          },\n          {\n            "type": "command",\n            "command": "npx @a16njs/glob-hook --globs \'**/*.test.ts\' --context-file \'.a16n/rules/testing.txt\'"\n          },\n          {\n            "type": "command",\n            "command": "npx @a16njs/glob-hook --globs \'src/api/**\' --context-file \'.a16n/rules/api.txt\'"\n          }\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"output-format",children:"Output Format"}),"\n",(0,o.jsx)(n.h3,{id:"when-pattern-matches",children:"When Pattern Matches"}),"\n",(0,o.jsx)(n.p,{children:"If the file path matches any of the glob patterns, glob-hook outputs:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "hookSpecificOutput": {\n    "additionalContext": "<contents of context file>"\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"when-pattern-doesnt-match",children:"When Pattern Doesn't Match"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:"{}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"on-error",children:"On Error"}),"\n",(0,o.jsxs)(n.p,{children:["Always outputs ",(0,o.jsx)(n.code,{children:"{}"})," (empty object) and logs errors to stderr. This ensures hook failures don't break Claude Code."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"glob-pattern-syntax",children:"Glob Pattern Syntax"}),"\n",(0,o.jsxs)(n.p,{children:["Patterns use ",(0,o.jsx)(n.a,{href:"https://github.com/micromatch/micromatch",children:"micromatch"})," syntax with ",(0,o.jsx)(n.code,{children:"dot: true"})," (matches dotfiles)."]}),"\n",(0,o.jsx)(n.h3,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Pattern"}),(0,o.jsx)(n.th,{children:"Matches"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"**/*.tsx"})}),(0,o.jsxs)(n.td,{children:["All ",(0,o.jsx)(n.code,{children:".tsx"})," files in any directory"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"**/*.ts,**/*.tsx"})}),(0,o.jsx)(n.td,{children:"All TypeScript files"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"src/components/**"})}),(0,o.jsxs)(n.td,{children:["All files under ",(0,o.jsx)(n.code,{children:"src/components/"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"*.config.js"})}),(0,o.jsx)(n.td,{children:"Config files in root"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"**/*.test.ts"})}),(0,o.jsx)(n.td,{children:"All test files"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"!node_modules/**"})}),(0,o.jsx)(n.td,{children:"Negation (exclude pattern)"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"pattern-examples",children:"Pattern Examples"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# React components\n--globs "**/*.tsx,**/*.jsx"\n\n# TypeScript source (excluding tests)\n--globs "src/**/*.ts,!**/*.test.ts"\n\n# API routes\n--globs "src/api/**/*.ts,src/routes/**/*.ts"\n\n# Config files\n--globs "*.config.js,*.config.ts,.*.js"\n\n# Documentation\n--globs "**/*.md,**/*.mdx,docs/**"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"integration-with-a16n-legacy",children:"Integration with a16n (Legacy)"}),"\n",(0,o.jsxs)(n.admonition,{title:"Historical Context",type:"info",children:[(0,o.jsxs)(n.p,{children:["Prior to January 2026, a16n used glob-hook to emulate Cursor's glob-based FileRules in Claude Code. This section is preserved for reference, but ",(0,o.jsx)(n.strong,{children:"a16n no longer uses this approach"}),"."]}),(0,o.jsxs)(n.p,{children:["Modern a16n versions emit FileRules as native ",(0,o.jsx)(n.code,{children:".claude/rules/*.md"})," files with ",(0,o.jsx)(n.code,{children:"paths:"})," frontmatter, which Claude Code supports natively."]})]}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsx)("summary",{children:"Legacy behavior (pre-January 2026)"}),(0,o.jsx)(n.p,{children:"When a16n converted Cursor FileRules to Claude format, it used glob-hook:"}),(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Discovery"}),": a16n reads Cursor rules with glob patterns from ",(0,o.jsx)(n.code,{children:".cursor/rules/*.mdc"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Generation"}),": For each rule, a16n creates:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A context file (",(0,o.jsx)(n.code,{children:".a16n/rules/<name>.txt"}),") containing the rule content"]}),"\n",(0,o.jsxs)(n.li,{children:["A hook configuration in ",(0,o.jsx)(n.code,{children:".claude/settings.local.json"})," using glob-hook"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Runtime"}),": When Claude Code triggers the hook, glob-hook matches file paths and injects context"]}),"\n"]}),(0,o.jsx)(n.h3,{id:"example-legacy-conversion",children:"Example Legacy Conversion"}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cursor source"})," (",(0,o.jsx)(n.code,{children:".cursor/rules/react.mdc"}),"):"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"---\nglobs: **/*.tsx,**/*.jsx\n---\n\nUse functional components with hooks.\nPrefer named exports over default exports.\n"})}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Claude output (legacy)"})," (",(0,o.jsx)(n.code,{children:".claude/settings.local.json"}),"):"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "hooks": {\n    "PreToolUse": [{\n      "matcher": "Write|Edit|MultiEdit",\n      "hooks": [{\n        "type": "command",\n        "command": "npx @a16njs/glob-hook --globs \'**/*.tsx,**/*.jsx\' --context-file \'.a16n/rules/react.txt\'"\n      }]\n    }]\n  }\n}\n'})})]}),"\n",(0,o.jsx)(n.h3,{id:"current-behavior",children:"Current Behavior"}),"\n",(0,o.jsx)(n.p,{children:"a16n now converts FileRules to native Claude rules:"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cursor source"})," (",(0,o.jsx)(n.code,{children:".cursor/rules/react.mdc"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:"---\nglobs: **/*.tsx,**/*.jsx\n---\n\nUse functional components with hooks.\nPrefer named exports over default exports.\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Claude output (current)"})," (",(0,o.jsx)(n.code,{children:".claude/rules/react.md"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:'---\npaths:\n  - "**/*.tsx"\n  - "**/*.jsx"\n---\n\n## From: .cursor/rules/react.mdc\n\nUse functional components with hooks.\nPrefer named exports over default exports.\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"hook-input-schema",children:"Hook Input Schema"}),"\n",(0,o.jsx)(n.p,{children:"The input from Claude Code hooks follows this structure:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface HookInput {\n  hook_event_name?: 'PreToolUse' | 'PostToolUse';\n  tool_name: string;\n  tool_input: {\n    file_path?: string;  // The path glob-hook matches against\n    content?: string;\n    command?: string;\n  };\n  tool_response?: {\n    content?: string;\n  };\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Node.js >= 18.0.0"}),"\n",(0,o.jsx)(n.li,{children:"Claude Code with hooks support"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/cli",children:"CLI Reference"})," - a16n command-line interface"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/plugin-claude",children:"Plugin: Claude"})," - Claude format details (now uses native rules)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/understanding-conversions",children:"Understanding Conversions"})," - How conversions work"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);