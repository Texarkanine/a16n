# Troubleshooting: Sidebar Version Sorting Still Broken

**Date:** 2026-01-29
**Issue:** Versions still showing oldest-first (0.2.0, 0.3.0) instead of newest-first

## User's Observed Sidebar Structure

```
Models
  - Models
  - API Reference
    - 0.2.0           ← WRONG ORDER (oldest first)
    - 0.3.0 (latest)

Plugin: Cursor
  - Plugin: Cursor
  - API Reference
    - 0.3.0           ← WRONG ORDER (oldest first)
    - variables
    - 0.4.0 (latest)
    - variables
      - default
```

## Expected Structure

```
Models
  - API Reference
    - 0.3.0 (latest)  ← CORRECT ORDER (newest first)
    - 0.2.0

Plugin: Cursor
  - API Reference
    - 0.4.0 (latest)  ← CORRECT ORDER (newest first)
    - 0.3.0
```

## Hypotheses

1. **Sidebar generator not running**: The custom `sidebarItemsGenerator` isn't being called
2. **Logic error**: The sorting logic has a bug
3. **Scope issue**: The function isn't finding the right items to sort
4. **Timing issue**: Items are being resorted after our function runs
5. **Autogeneration conflict**: `type: 'autogenerated'` in sidebars.js might be overriding our sorting

## Investigation Plan

1. ✅ Check sidebars.js structure
2. ✅ Verify sidebarItemsGenerator is in correct location
3. ✅ Check actual filesystem structure
4. ✅ Identify root cause

## Root Cause CONFIRMED

**Actual filesystem structure:**
```
models/api/
  - 0.2.0/
  - 0.3.0/

plugin-cursor/api/
  - 0.3.0/
  - 0.4.0/
```

**Problem:** The sorting function is too complex and has logic errors. The separation of version vs non-version items isn't working correctly, and the reassembly logic is faulty.

**Solution:** Simplify to use a standard sort with a custom comparator that:
1. Identifies version items by regex
2. Sorts version items descending (newest first)
3. Leaves non-version items in their original positions

## Fixes Applied

1. **Simplified sorting logic** in `docusaurus.config.js`:
   - Use single `sort()` with custom comparator
   - Recursively process all levels
   - Version items sort descending, non-version items stay in place

2. **Removed " (latest)" labels** from `generate-versioned-api.ts`:
   - All version titles are now just "0.4.0", "0.3.0", etc.
   - No special labeling for latest version

## Expected Result

```
Models
  - API Reference
    - 0.3.0  ← NEWEST FIRST
    - 0.2.0

Plugin: Cursor
  - API Reference
    - 0.4.0  ← NEWEST FIRST
    - 0.3.0
```
