# Memory Bank: Tasks

<!-- This file tracks current task details, checklists, and implementation plans. -->
<!-- It is ephemeral and cleared by /archive when a task is completed. -->

## Current Task

**Task ID:** DOCS-SITE-MVP
**Complexity:** Level 3 (Intermediate Feature)
**Started:** 2026-01-28

### Overview

Set up a Docusaurus documentation site at `apps/docs/` with integrated TypeDoc API reference generation. The goal is to prove the pipeline works with placeholder prose content - users can fill in detailed guides later.

### Requirements

From `planning/DOCS.md`:
1. Private `apps/docs` workspace package with Docusaurus + TypeDoc integration
2. Generated API docs from TSDoc comments in each package (gitignored)
3. Placeholder hand-written docs structure for each module
4. GitHub Actions workflow for build and deployment
5. Package READMEs stay in-package (npm/GitHub discoverability)

### Target Architecture

```
apps/
  docs/
    package.json          # private: true, docusaurus + typedoc deps
    docusaurus.config.js  # typedoc plugin config per package
    docs/
      intro.md            # Site introduction
      cli/
        index.md          # CLI placeholder guide
      engine/
        index.md          # Engine placeholder guide
      models/
        index.md          # Models placeholder guide
      plugin-cursor/
        index.md          # Cursor plugin placeholder guide
      plugin-claude/
        index.md          # Claude plugin placeholder guide
      glob-hook/
        index.md          # Glob-hook placeholder guide
      api/                # GENERATED by TypeDoc (gitignored)
        cli/
        engine/
        models/
        plugin-cursor/
        plugin-claude/
        glob-hook/
    sidebars.js           # Navigation structure
    build/                # GENERATED static site (gitignored)
```

### Packages to Document

| Package | Description | Has TSDoc |
|---------|-------------|-----------|
| `a16n` (cli) | CLI tool | Partial |
| `@a16njs/engine` | Conversion engine | Yes |
| `@a16njs/models` | Types and interfaces | Yes |
| `@a16njs/plugin-cursor` | Cursor IDE plugin | Yes |
| `@a16njs/plugin-claude` | Claude Code plugin | Yes |
| `@a16njs/glob-hook` | Hook CLI tool | Partial |

### Toolchain

| Tool | Purpose | npm Package |
|------|---------|-------------|
| Docusaurus 3 | Static site framework | `@docusaurus/core`, `@docusaurus/preset-classic` |
| TypeDoc | API doc extraction | `typedoc` |
| typedoc-plugin-markdown | TypeDoc → Markdown | `typedoc-plugin-markdown` |
| docusaurus-plugin-typedoc | TypeDoc/Docusaurus integration | `docusaurus-plugin-typedoc` |

---

## Implementation Plan

### Phase 1: Project Structure Setup
- [ ] Create `apps/docs/` directory
- [ ] Add `apps/docs/package.json` with Docusaurus + TypeDoc deps (private: true)
- [ ] Update `pnpm-workspace.yaml` to include `apps/*`
- [ ] Update root `.gitignore` for generated docs/build

### Phase 2: Docusaurus Configuration
- [ ] Create `docusaurus.config.js` with typedoc plugin config
- [ ] Create `sidebars.js` with navigation structure
- [ ] Create placeholder `docs/intro.md`

### Phase 3: Placeholder Guides (per-module)
- [ ] Create `docs/cli/index.md` - CLI placeholder
- [ ] Create `docs/engine/index.md` - Engine placeholder
- [ ] Create `docs/models/index.md` - Models placeholder
- [ ] Create `docs/plugin-cursor/index.md` - Cursor plugin placeholder
- [ ] Create `docs/plugin-claude/index.md` - Claude plugin placeholder
- [ ] Create `docs/glob-hook/index.md` - Glob-hook placeholder

### Phase 4: TypeDoc Integration
- [ ] Configure typedoc-plugin for each package entry point
- [ ] Verify API docs generate to `docs/api/` directory
- [ ] Test local build: `pnpm --filter docs build`

### Phase 5: Turbo Integration
- [ ] Add `docs:build` task to `turbo.json`
- [ ] Add `docs:dev` task for local development
- [ ] Verify turborepo caching works

### Phase 6: CI/CD Workflow
- [ ] Create `.github/workflows/docs.yaml` for GitHub Pages deployment
- [ ] Use `peaceiris/actions-gh-pages` or direct Pages deployment
- [ ] Only deploy on main branch pushes

### Phase 7: Verification
- [ ] Run full build locally
- [ ] Verify TypeDoc generates API reference
- [ ] Verify Docusaurus builds without errors
- [ ] Test navigation structure

---

## Test Planning

### Behaviors to Verify
1. `pnpm --filter docs build` succeeds
2. TypeDoc generates markdown files in `docs/api/`
3. Docusaurus produces static site in `build/`
4. Navigation works (sidebar reflects structure)
5. API reference links work

### Test Approach
This is infrastructure/build tooling - testing is via build verification, not unit tests.

---

## Creative Phases Identified

None - the architecture is specified in `planning/DOCS.md`. This is implementation of a defined spec.

---

## QA Validation (Pre-Build)

**Status:** PASS  
**Validated:** 2026-01-28

| Check | Result |
|-------|--------|
| 1. Dependencies | ✓ Node v22.15.0 (>=18), pnpm 9.0.0; node_modules present |
| 2. Configuration | ✓ package.json, turbo.json, pnpm-workspace.yaml valid |
| 3. Environment | ✓ Build tools available; project writable |
| 4. Minimal Build | ✓ `pnpm run build` and `pnpm run test` passed (6 packages) |

→ Clear to proceed to BUILD mode.

---

## Notes

- Start with placeholder prose content - pipeline proof is the goal
- Package READMEs stay in-package (don't move them)
- Use latest stable versions of all tools (Docusaurus 3.x, TypeDoc 0.x)
- Generated content is gitignored - CI builds fresh each time
