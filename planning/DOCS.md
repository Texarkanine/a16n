# Documentation Site Brief

## Decision: Docusaurus in a Dedicated Workspace

Add a private workspace package (`apps/docs` or `packages/docs`) to host a Docusaurus documentation site with integrated API reference generation.

## Architecture

```
apps/
  docs/
    package.json          # private: true, docusaurus + typedoc deps
    docusaurus.config.js  # typedoc plugin config per package
    docs/
      core/               # hand-written guides for @scope/core
      cli/                # hand-written guides for @scope/cli
      api/                # GENERATED by TypeDoc (gitignored)
        core/
        cli/
    build/                # GENERATED static site (gitignored)

packages/
  core/
    README.md             # quick-start, shown on npm (stays here)
    src/
  cli/
    README.md
    src/
```

## Toolchain

| Tool | Purpose |
|------|---------|
| Docusaurus | Static site framework |
| TypeDoc | Extracts API docs from TSDoc/JSDoc |
| typedoc-plugin-markdown | TypeDoc → Markdown output |
| docusaurus-plugin-typedoc | Wires TypeDoc into Docusaurus build |

## Key Constraints

1. **No generated content committed.** `docs/api/` and `build/` are gitignored. CI builds and deploys.
2. **Hand-written docs live in `apps/docs/docs/`**, not distributed across packages. Atomic commits still possible—PRs touch both `packages/foo/src/` and `apps/docs/docs/foo/` as needed.
3. **Package READMEs remain in-package** for npm/GitHub discoverability.

## Deployment

GitHub Actions workflow:

1. `pnpm --filter docs build` — TypeDoc generates API markdown, then Docusaurus builds static site
2. Deploy `apps/docs/build/` via either:
   - Push to `gh-pages` branch (peaceiris/actions-gh-pages)
   - Direct Actions deployment (no branch, upload artifact to Pages)

## Why This Approach

- JS-native tooling, no Python dependency
- TypeDoc integration replaces mkdocs-merge workflow—one build, unified site
- Docusaurus multi-instance plugin handles per-package API docs natively
- Clean separation: source in main branch, built artifacts only in deployment